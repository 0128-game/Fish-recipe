async function loadRecipes() {
    try {
        const response = await fetch('docs/recipes.json');
        if (!response.ok) {
            throw new Error('JSONファイルが読み込めません');
        }
        const data = await response.json();
        console.log("✅ JSON読み込み成功:", data);

        // 配列形式かオブジェクト形式かを判定
        const recipes = Array.isArray(data) ? data : data.recipes;
        console.log("📂 recipes配列:", recipes);

        return recipes;
    } catch (error) {
        console.error(error);
        return [];
    }
}

async function showRecipe() {
    const rankInput = document.getElementById('rankInput').value.trim();
    console.log("🎯 入力された値:", rankInput);

    if (!rankInput) {
        alert("順位を入力してください");
        return;
    }

    const recipes = await loadRecipes();
    console.log("🔍 検索対象rank:", rankInput, " recipes配列:", recipes);

    const rankNumber = parseInt(rankInput, 10);

    // rankが数値型か文字列型かに対応
    const recipe = recipes.find(r => parseInt(r.rank, 10) === rankNumber);

    if (!recipe) {
        alert("該当するレシピが見つかりません");
        return;
    }

    console.log(`🎉 見つかったレシピ: rank=${recipe.rank}, name=${recipe.name}`);

    document.getElementById('recipeDisplay').innerHTML = `
        <h2>${recipe.name}</h2>
        <p>${recipe.description}</p>
        <ul>
            ${recipe.ingredients.map(ing => `<li>${ing}</li>`).join('')}
        </ul>
    `;
}
