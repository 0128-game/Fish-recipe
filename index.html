async function loadRecipes() {
    try {
        // JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿
        const response = await fetch('docs/recipes.json');
        if (!response.ok) {
            throw new Error('JSONãƒ•ã‚¡ã‚¤ãƒ«ãŒèª­ã¿è¾¼ã‚ã¾ã›ã‚“');
        }
        const recipes = await response.json();
        console.log("âœ… JSONèª­ã¿è¾¼ã¿æˆåŠŸ:", recipes); // ç¢ºèªç”¨
        return recipes;
    } catch (error) {
        console.error(error);
        return [];
    }
}

// rankå…¥åŠ›ã‹ã‚‰ãƒ¬ã‚·ãƒ”ã‚’è¡¨ç¤º
async function showRecipe() {
    const rankInput = document.getElementById('rankInput').value.trim();

    console.log("ğŸ¯ å…¥åŠ›ã•ã‚ŒãŸå€¤:", rankInput); // å…¥åŠ›ç¢ºèª

    if (!rankInput) {
        alert("é †ä½ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
        return;
    }

    const recipes = await loadRecipes();

    // JSONã®rankã¯æ•°å€¤ã‹ã‚‚ã—ã‚Œãªã„ã®ã§å‹ã‚’åˆã‚ã›ã‚‹
    const rankNumber = parseInt(rankInput, 10);

    // rankã§ãƒ•ã‚£ãƒ«ã‚¿
    const recipe = recipes.find(r => parseInt(r.rank, 10) === rankNumber);

    console.log("ğŸ” æ¤œç´¢çµæœ:", recipe); // çµæœç¢ºèª

    if (!recipe) {
        alert("è©²å½“ã™ã‚‹ãƒ¬ã‚·ãƒ”ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
        return;
    }

    // ãƒ¬ã‚·ãƒ”è¡¨ç¤º
    document.getElementById('recipeDisplay').innerHTML = `
        <h2>${recipe.name}</h2>
        <p>${recipe.description}</p>
        <ul>
            ${recipe.ingredients.map(ing => `<li>${ing}</li>`).join('')}
        </ul>
    `;
}

document.getElementById('searchButton').addEventListener('click', showRecipe);
