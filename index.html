async function loadRecipes() {
    try {
        // JSONファイルを読み込み
        const response = await fetch('docs/recipes.json');
        if (!response.ok) {
            throw new Error('JSONファイルが読み込めません');
        }
        const recipes = await response.json();
        console.log("✅ JSON読み込み成功:", recipes); // 確認用
        return recipes;
    } catch (error) {
        console.error(error);
        return [];
    }
}

// rank入力からレシピを表示
async function showRecipe() {
    const rankInput = document.getElementById('rankInput').value.trim();

    console.log("🎯 入力された値:", rankInput); // 入力確認

    if (!rankInput) {
        alert("順位を入力してください");
        return;
    }

    const recipes = await loadRecipes();

    // JSONのrankは数値かもしれないので型を合わせる
    const rankNumber = parseInt(rankInput, 10);

    // rankでフィルタ
    const recipe = recipes.find(r => parseInt(r.rank, 10) === rankNumber);

    console.log("🔍 検索結果:", recipe); // 結果確認

    if (!recipe) {
        alert("該当するレシピが見つかりません");
        return;
    }

    // レシピ表示
    document.getElementById('recipeDisplay').innerHTML = `
        <h2>${recipe.name}</h2>
        <p>${recipe.description}</p>
        <ul>
            ${recipe.ingredients.map(ing => `<li>${ing}</li>`).join('')}
        </ul>
    `;
}

document.getElementById('searchButton').addEventListener('click', showRecipe);
